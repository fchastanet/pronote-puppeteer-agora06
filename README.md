# pronote-puppeteer-agora06

- [What this tool does ?](#what-this-tool-does-)
- [1. Results directory](#1-results-directory)
  - [1.1. cahierDeTexte-courses.json](#11-cahierdetexte-coursesjson)
  - [1.2. cahierDeTexte-travailAFaire.json](#12-cahierdetexte-travailafairejson)
  - [1.3. studentInfo.json](#13-studentinfojson)
  - [1.4. id](#14-id)
  - [1.5. md5](#15-md5)
- [2. Files Processing](#2-files-processing)
  - [2.1. Reading Files](#21-reading-files)
  - [2.2. Parsing and Converting Data](#22-parsing-and-converting-data)
  - [2.3. Inserting Data into Database](#23-inserting-data-into-database)
  - [2.4. Generating Unique IDs](#24-generating-unique-ids)
  - [2.5. Computing Checksums](#25-computing-checksums)
  - [2.6. Tracking Processed Files](#26-tracking-processed-files)
- [3. data analytics choice](#3-data-analytics-choice)
  - [Measures](#measures)
    - [Homework Completion Rate](#homework-completion-rate)
    - [Homework Completion Timeliness](#homework-completion-timeliness)
    - [Average Homework Duration](#average-homework-duration)
    - [Homework Load Per Week](#homework-load-per-week)
    - [Homework Load Per Subject](#homework-load-per-subject)
    - [Homework Completion Per Subject](#homework-completion-per-subject)

## What this tool does ?

little node js tool to get pronote data as json files

- grab data to results folder from pronote into 3 json files
- process these files and insert data in an sqlite database
- generate measures based on these data

## 1. Results directory

The results folder contains JSON files generated by the Pronote data retrieval process. These files are organized by timestamped directories, each representing a specific data retrieval session. 

These files are generated by the PronoteCrawler class during the data retrieval process. The crawler navigates through the Pronote interface, extracts the necessary information, and writes it into these JSON files. The files are then used for further 
data processing and analysis.

Here are the key files and their contents:

### 1.1. cahierDeTexte-courses.json

This file contains information about the resources related to the "Cahier de Texte" (Notebook) feature in Pronote. It includes details about the educational content and resources provided to students.

The structure typically includes:

```json
{
  "resources": [
    {
      "id": "resource_id",
      "title": "Resource Title",
      "description": "Resource Description",
      "type": "Resource Type",
      "url": "Resource URL"
    },
    ...
  ]
}
```

### 1.2. cahierDeTexte-travailAFaire.json

This file contains information about the homework assignments ("Travail Ã  Faire") listed in the "Cahier de Texte". It includes details about the assignments, deadlines, and other relevant information.

The structure typically includes:

```json
{
  "homework": [
    {
      "id": "homework_id",
      "title": "Homework Title",
      "description": "Homework Description",
      "dueDate": "YYYY-MM-DD",
      "subject": "Subject Name"
    },
    ...
  ]
}
```

### 1.3. studentInfo.json

This file contains general information about the student, such as their full name, grade, school, and session number. This information is extracted from the Pronote dashboard.

The structure typically includes:

```json
{
  "fullName": "Student Full Name",
  "name": "Student Name",
  "grade": "Student Grade",
  "school": "School Name",
  "sessionNumber": "Session Number"
}
```

### 1.4. id

The ids are using the form `18#v9hvwyhDOSmz5nbOx-Gs_-w5dw13lavpZZ_N6Oq1dI4`
These ids are probably encoded using sha with private key based on the session id.

So using the same session I can find references to data (for example I can find
homework linked to course). But when the session change, the id is changing.

So I need to generate an id from data that are not supposed to change.

For HomeworkId I could use the fields:

- submittedDate
- subject
- And also the homework references in cahierDeTexte-courses.json:
  - the course (I think it corresponds to the course defined in the class planning)
    - the planned course for the entire year.
    - So several "CahierDeTexte" can reference the same Course.
    - but I probably can rely on the data set on all the first cahierDeTexte row referencing the
      course. So Id can be composed of:
      - subject
      - professor (what happen if the professor is replaced ? is it indicated in pronote ?)

  - the "CahierDeTexte" (I think it corresponds to the instance of the course at given
    date). So Id can be composed of:
    - courseId (see above)
    - Date
    - DateFin

could I use <https://github.com/bain3/pronotepy/blob/master/pronotepy/pronoteAPI.py> to decode ids ?

### 1.5. md5

checksum can be computed on the each object by first removing the fields:

- Id
- session

## 2. Files Processing

### 2.1. Reading Files

The system reads JSON files containing course data, such as cahierDeTexte-courses.json.

### 2.2. Parsing and Converting Data

The JSON data is parsed and converted into structured objects. For example, course items are converted into course objects with properties like courseId, startDate, endDate, etc.

### 2.3. Inserting Data into Database

The converted objects are inserted into the database. Tables like courses, content, attachments, and teachers are used to store the data.

### 2.4. Generating Unique IDs

Unique IDs for courses are generated using a combination of courseId, startDate, and endDate.

### 2.5. Computing Checksums

Checksums are computed for each object by removing specific fields like Id and session and then generating an MD5 hash.

### 2.6. Tracking Processed Files

A separate table, processed_files, is used to track the processing status of each file. Files are marked as processed once they are successfully inserted into the database.

## 3. data analytics choice

For data analytics, two main approaches are considered:

- data analytics tool similar to powerBI, 2 main choices are available

  - <https://redash.io/product/>
  - <https://superset.apache.org>

- generate HTML page with statistics generated statically, 2 main choices are available

  - <https://c3js.org/> based on d3.js without the need to know d3.js
  - <https://www.chartjs.org/docs/latest/> offers visually better charts than c3js

Data analytics tool similar to powerBI requires a higher learning curve and needs a
server side application.
Let's start simple with static site generation for the moment.

### Measures

Generate notifications when new homework.

#### Homework Completion Rate

This metric helps you understand the overall completion rate of homework assignments.

#### Homework Completion Timeliness

This metric shows how often homework is completed on or before the due date.

#### Average Homework Duration

This metric provides insight into the average time required to complete homework assignments.

#### Homework Load Per Week

This metric helps you track the number of homework assignments given each week, allowing you to identify weeks with a high workload.

#### Homework Load Per Subject

This metric shows the distribution of homework assignments across different subjects.

#### Homework Completion Per Subject

This metric provides the completion rate of homework assignments for each subject, helping you identify subjects where homework is consistently completed or not.
